<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sistema de Campeonato (Firestore)</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-4">
  <div class="max-w-6xl mx-auto">
    <h1 class="text-3xl font-bold text-center mb-6">Sistema de Campeonato üèÜ</h1>

    <div class="flex flex-wrap justify-center gap-2 mb-6">
      <button id="inscricaoBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg">üìù Inscri√ß√µes</button>
      <button id="publicoBtn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg">üë• Lista P√∫blica</button>
      <button id="acompanharBtn" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg">üìä Acompanhar</button>
      <button id="adminBtn" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg">‚öôÔ∏è Admin</button>
    </div>

    <section id="inscricaoSection" class="bg-white p-6 rounded-lg shadow mb-6">
      <!-- ... SE√á√ÉO INSCRI√á√ÉO (SEM ALTERA√á√ïES) ... -->
    </section>

    <section id="publicoSection" class="bg-white p-6 rounded-lg shadow mb-6 hidden">
      <!-- ... SE√á√ÉO P√öBLICA (SEM ALTERA√á√ïES) ... -->
    </section>

    <section id="acompanharSection" class="bg-white p-6 rounded-lg shadow mb-6 hidden">
      <h2 class="text-xl font-bold mb-4">Acompanhar Jogos</h2>
      <div id="jogosAcompanhar" class="space-y-4"></div>
    </section>

    <section id="adminSection" class="bg-white p-6 rounded-lg shadow mb-6 hidden">
      <!-- ... TODA √ÅREA ADMIN (SEM ALTERA√á√ïES) ... -->
    </section>
  </div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
import { getFirestore, collection, doc, addDoc, getDocs, deleteDoc, setDoc, updateDoc, getDoc, query, where, writeBatch } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBo8G3ZcWk4EepN0cHdVBtXc7tGOfcw-yg",
  authDomain: "inscricaosinuca.firebaseapp.com",
  projectId: "inscricaosinuca",
  storageBucket: "inscricaosinuca.firebasestorage.app",
  messagingSenderId: "338241576305",
  appId: "1:338241576305:web:288b6124384c6be4f76ad0",
  measurementId: "G-PEDG30FS2R"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const inscritosCol = collection(db, "inscritos");
const modalidadesCol = collection(db, "modalidades");
const fasesCol = collection(db, "fases");
const jogosCol = collection(db, "jogos");
const configDocRef = doc(db, "config", "geral");

// --- NAVEGA√á√ÉO ---
function showSection(name){
  document.querySelectorAll('section').forEach(s=>s.classList.add('hidden'));
  document.getElementById(name+'Section').classList.remove('hidden');
}

document.getElementById('inscricaoBtn').addEventListener('click', ()=>showSection('inscricao'));
document.getElementById('publicoBtn').addEventListener('click', carregarListaPublica);
document.getElementById('acompanharBtn').addEventListener('click', carregarAcompanhar);
document.getElementById('adminBtn').addEventListener('click', async ()=>{
  const senha = prompt("Senha do administrador:");
  if(senha === 'dpsp123'){ 
    showSection('admin'); 
    carregarAdmin();
  } else if(senha){ 
    alert('Senha incorreta'); 
  }
});

/* ---------- INSCRI√á√ïES, LISTA P√öBLICA, ADMIN, FASES, PLACARES, RESET ---------- */
/* (todo o restante do seu c√≥digo permanece igual, sem altera√ß√µes) */


/* ---------- ACOMPANHAR (ALTERADO) ---------- */
async function carregarAcompanhar() {
    showSection('acompanhar');
    const jogosDiv = document.getElementById('jogosAcompanhar');
    jogosDiv.innerHTML = '<p class="text-gray-500">Carregando jogos...</p>';
    
    const snap = await getDocs(jogosCol);
    if (snap.empty) {
        jogosDiv.innerHTML = '<p class="text-gray-500">Ainda n√£o h√° jogos definidos.</p>';
        return;
    }

    // ‚úÖ Agrupar por modalidade e fase
    const jogosPorModalidade = snap.docs.reduce((acc, doc) => {
        const jogo = doc.data();
        if (!acc[jogo.modalidade]) acc[jogo.modalidade] = {};
        if (!acc[jogo.modalidade][jogo.fase]) acc[jogo.modalidade][jogo.fase] = [];
        acc[jogo.modalidade][jogo.fase].push(jogo);
        return acc;
    }, {});

    let html = '';
    for (const modalidade in jogosPorModalidade) {
        html += `<h2 class="text-xl font-bold mt-6">${modalidade}</h2>`;
        for (const fase in jogosPorModalidade[modalidade]) {
            html += `<h3 class="text-lg font-semibold mt-2 border-b pb-1">Fase ${fase}</h3>`;
            jogosPorModalidade[modalidade][fase].forEach(j => {
                const statusClass = j.finalizado ? 'bg-green-50 text-green-800' : '';
                html += `<div class="p-3 border rounded-lg flex justify-between items-center ${statusClass}">
                    <span>${j.jogador1} vs ${j.jogador2}</span>
                    <span class="font-bold text-lg">${j.placar1 || 0} x ${j.placar2 || 0}</span>
                </div>`;
            });
        }
    }
    jogosDiv.innerHTML = html;
}


// --- INICIALIZA√á√ÉO ---
carregarConfigGeral();
carregarModalidades();

</script>
</body>
</html>
